# 云智三面

只能说尽力了，挂了也没法bro/(ㄒoㄒ)/~~。

## 自我介绍

正常回答。

## 问题

草了啊，又遇到和二面一样的情况，上来就问知道中间件ES什么之类的嘛，真不会，可惜，但是三面的面试官整体体验是最好的吧，也非常耐心的深入拓展一些中间件知识，整体问题偏向于业务一点，笔试直接题目意识理解错了，非常夸张，哎。



**如果你遇到了一个业务，性能以及慢到了秒级，你会怎么去排查？**

上来直接给一个很简单的业务，属于是非常温和了，可惜没回答好。



**问题再细化一点，就是我们不使用缓存，只有mysql遇到了查询太慢的问题，你会怎么排查？**



**你刚刚提到了索引，说一下你使用索引的情况，什么场景你才会使用索引？**

这里回答的也非常不好啊，我说从我的分布式实时消息推送系统来看，从两个角度分析，第一个是网络层，测试其在高并发下，是否能够稳定的支持TCP连接；一个是业务逻辑层，耗时的主要问题还是出现在数据库的操作中，因为存在基于磁盘的IO，分析是否使用redis这样的缓存技术，如果已经使用了redis，且这段业务逻辑还是非常耗时，分析是否出现了缓存雪崩，击穿和穿透。



**如何判断索引是否使用成功了，你刚刚说到了使用`EXPLAIN`命令，那么当使用`EXPLAIN`命令时，你会关注查询语句的什么字段？**

纯属给自己挖了坑，`EXPLAIN`语句没有使用过，给问懵了。



**刚刚说到了使用缓存，那么你会在什么情况下选择加入缓存？**



**刚刚你谈到了QPS，mysql有一个约定俗成的QPS规定吗，在QPS底到什么情况下，才选择加入中间件？**



**如何保证缓存和数据库的一致性，采用什么方案？**

这里直接懵了啊，我直接回答说应该最多支持百万级的数据量（我猜的），然后说我接触到的最大数据量是十万级（面试官又反问到是百万级的吗，这个不能靠猜吧）。



**为什么先删除缓存，再更新数据库会导致缓存不一致的情况？**

这里没回答上来，有点窒息。



## 手撕环节

给一个有序数组，构造平衡二叉树。

很久没有写手撕题目了，哎，没办法，没写出来，思路直接就错了，从平衡二叉树的概念入手，每插入一次节点，就调整树的高度，这个思路太复杂了，面试官直接跟我说根据二叉搜索树的有序性，直接找根节点就行了，然后递归找左右子树的根节点构造，就写出来了。







