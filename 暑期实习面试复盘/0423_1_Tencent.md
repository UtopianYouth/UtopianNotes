# 腾讯企业微信后台开发一面复盘

## 自我介绍

回答的非常随便，后续用模板，好了很多。

## 项目1

**问题1：在什么样的契机下，也就是做这个项目的目的是什么？**

回答：当时做这个项目的主要目的是学习网络编程和系统编程这一块，然后简单的说了一下我的项目功能，解析 HTTP 请求，根据请求内容给客户端发送指定的 HTTP 响应。

**优化：**尝试从学习的态度 + 对于基础架构的兴趣爱好 + 网络编程的深入理解来回答。



**问题2：压测结果太低，为什么并发量上不去，理论上来说，使用了 EPOLL，至少能够达到 10^4 甚至更多的数量级，聊一下你会以什么样的方式去寻找程序的性能瓶颈？**

当时拿到这个问题，我下意识的认为这个问题比较大，然后就回答的有点笼统（有点可惜啊，为什么我当时不说，通过调整 `webbench` 的参数，至少能排除不是哪里的问题，这是我实际做过的！），只说了通过 `htop` 命令查看了运行 webserver 时的CPU和内存使用情况。

然后我又说，如果定位程序的问题，是用 `gdb` ，但是感觉和面试官聊的很放松，我居然说了我不是很会用 `gdb`，所以 webserver 并发量没上去的问题没有解决。

**优化：**尝试分析程序性能瓶颈可能出现的地方，

> 更通俗的理解，本质就是找程序执行时间最耗时的地方：
>
> 一般地：复杂的业务处理和IO是程序最耗时的地方，对应本项目的两个解决方案：
>
> - 有限状态机解析 HTTP 请求；
> - 内存映射和分散写解决高效 IO；
>
> 可以尝试拓展一下 `EPOLLET` 和 `EPOLLT` 的区别。



**问题3：基于你的理解，尝试回答一下什么是 HTTP 协议（我感觉这个问题好奇怪啊，但是我当时又没反应过来）？**

拿到这个问题，我有点懵，是想通过建立 TCP 连接的角度回答，还是通过 HTTP 相关的概念回答。

然后还是选错了，因为对 HTTP 概念口头描述，我有点不适应，就通过项目说，客户端在浏览器输入域名，然后发送 HTTP 请求连接给服务器端，建立 TCP 连接，建立 TCP 连接成功后，服务器端创建 TCP 通信的读写缓冲区，然后 EPOLL 检测等等.....（我应该是想让面试官问我一下 TCP 的三次握手和四次挥手，但是面试官听完我的回答后，显然不感兴趣，只是简单的回答了一下好吧）。

**优化：**很明显是一个非常基础的问题，从概念入手就好了

> 超文本传输协议，B/S模式下的最常见网络资源，基于 `TCP/IP` 协议栈实现的，数据可靠，保证安全性 ==> `HTTPS` 协议

**问题4：平常有了解过 HTTPS 协议吗，简单聊一下 HTTPS 协议是如何保证数据传输安全的？**

直接说不会了，为了避免尴尬，我反问了一下，是不是和 SSH 的加密比较像。面试官人也挺好，没有继续压力（我太菜了，估计知道我肚子里面没货，没有压力的必要），就简单地回答了我一下。

**优化：**TLS 三次握手 + CA 证书链的验证，客户端验证通过后，双方通过对称密钥加密数据进行通信，在获得对称加密的密钥之前，双方通过非对称加密的方式通信。

## 项目2

**问题1：在什么样的契机下，也就是做这个项目的目的是什么？**

我回答了这个项目和第一个项目的主要区别是用到了 Oracle，然后说对于 cpp 后端岗技术栈的要求，数据库是必会的，主要就是为了让自己的技术栈更加全面一点（卧槽，现在才反应过来，我好像两个项目都没有用简单的语言介绍我项目的功能）。

**优化：**结合第一个项目来聊，第一个项目更多关注的是基础框架的实现，而第二个项目更多的是基于后端业务逻辑的实现。

**问题2：简单聊一下分布式数据库的实现原理，如何保证大型项目运行的稳定性，保证不宕机（容灾）？**

这个问题估计就是基于问题1延申的，因为我说这个项目用了 Oracle。

我直接又又又不会了，随便回答说分布式数据库有很多个服务器节点，备份了相同的数据，保证一个数据库服务器没了，其它的数据库服务器可以继续提供和处理数据库请求服务。

我知道回答的肯定不对，为了避免尴尬，所以就反问面试官一个问题，说分布式数据库是不是和 nginx 服务器的负载均衡机制比较像，就是对于一个数据库请求，多台数据库服务器可以并行发送数据，提高数据响应速度。



## 手撕题目

是关于字符串操作的，感觉对字符串操作的非常手生，写的比较生疏（LC 原题），但是应该没问题（思路上），面试官给了一些优化的建议。

[LC 165](https://leetcode.cn/problems/compare-version-numbers/description/)：比较版本号

考察双指针

[LC 93](https://leetcode.cn/problems/restore-ip-addresses/description/)：复原 IP 地址

考察回溯法

## 总结

我感觉项目单纯做出来，感觉应付面试好像不太够，因为根本就没有弄清楚项目做出来的目的是什么（面试官好像对这个非常感兴趣），然后八股确实没怎么准备，现在时间比较晚了，然后又很想找暑期实习，就匆匆忙忙在官网上投了简历，有种知道自己一面挂，但是又想去试一下的冲动。

## 面试体验

从面试开始的那一刻，感觉面试官就看出来我菜了，然后面试官整个面试过程没有给我压力，问的问题比较宽泛，但是如果答的好的话，面试官是有机会继续深入问下去的（可惜我答的不好）。

整体上，感觉和聊天差不多（就是和传统的 KPI 面说法很一致），但是做题目的时候有点紧张，可能第一次吧，然后 ACM 模式，做的有点少，非常手生。



